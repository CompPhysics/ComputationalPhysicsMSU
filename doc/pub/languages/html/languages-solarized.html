<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Computational Physics Lectures:  Introduction to programming (C++ and Fortran)">

<title>Computational Physics Lectures:  Introduction to programming (C++ and Fortran)</title>


<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_solarized_box/css/solarized_light_code.css" rel="stylesheet" type="text/css" title="light"/>
<script src="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_solarized_box/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="http://thomasf.github.io/solarized-css/solarized-light.min.css" rel="stylesheet">
<style type="text/css">
h1 {color: #b58900;}  /* yellow */
/* h1 {color: #cb4b16;}  orange */
/* h1 {color: #d33682;}  magenta, the original choice of thomasf */
code { padding: 0px; background-color: inherit; }
pre {
  border: 0pt solid #93a1a1;
  box-shadow: none;
}
.alert-text-small   { font-size: 80%;  }
.alert-text-large   { font-size: 130%; }
.alert-text-normal  { font-size: 90%;  }
.alert {
  padding:8px 35px 8px 14px; margin-bottom:18px;
  text-shadow:0 1px 0 rgba(255,255,255,0.5);
  border:1px solid #93a1a1;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  color: #555;
  background-color: #eee8d5;
  background-position: 10px 5px;
  background-repeat: no-repeat;
  background-size: 38px;
  padding-left: 55px;
  width: 75%;
 }
.alert-block {padding-top:14px; padding-bottom:14px}
.alert-block > p, .alert-block > ul {margin-bottom:1em}
.alert li {margin-top: 1em}
.alert-block p+p {margin-top:5px}
.alert-notice { background-image: url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_notice.png); }
.alert-summary  { background-image:url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_summary.png); }
.alert-warning { background-image: url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_warning.png); }
.alert-question {background-image:url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_question.png); }

div { text-align: justify; text-justify: inter-word; }
</style>


</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [('Extremely useful tools, strongly recommended',
               2,
               None,
               '___sec0'),
              ('A structured programming approach', 2, None, '___sec1'),
              ('A structured programming approach', 2, None, '___sec2'),
              ('Getting Started', 2, None, '___sec3'),
              ('Makefiles and simple scripts', 2, None, '___sec4'),
              ('"Hello world":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program1.cpp"',
               2,
               None,
               '___sec5'),
              ('Hello World, dissecting the code', 2, None, '___sec6'),
              ('Hello World, more dissection', 2, None, '___sec7'),
              ('Hello World', 2, None, '___sec8'),
              ('C++ Hello World', 2, None, '___sec9'),
              ('Brief summary', 2, None, '___sec10'),
              ('Brief summary', 2, None, '___sec11'),
              ('Serious problems and representation of numbers',
               2,
               None,
               '___sec12'),
              ('Limits, you must declare variables', 2, None, '___sec13'),
              ('From decimal to binary representation', 2, None, '___sec14'),
              ('From decimal to binary representation, the actual operation',
               2,
               None,
               '___sec15'),
              ('"From decimal to binary representation":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program2.cpp"',
               2,
               None,
               '___sec16'),
              ('"From decimal to binary representation":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/Fortran/program2.f90"',
               2,
               None,
               '___sec17'),
              ('"Representing Integer Numbers":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program3.cpp"',
               2,
               None,
               '___sec18'),
              ('Loss of Precision', 2, None, '___sec19'),
              ('Loss of Precision', 2, None, '___sec20'),
              ('Loss of Precision', 2, None, '___sec21'),
              ('Loss of Precision, example', 2, None, '___sec22'),
              ('Loss of Precision', 2, None, '___sec23'),
              ('Loss of Precision, consequences', 2, None, '___sec24'),
              ('Loss of Precision', 2, None, '___sec25'),
              ('Loss of Precision', 2, None, '___sec26'),
              ('Loss of Precision', 2, None, '___sec27'),
              ('Loss of Precision', 2, None, '___sec28'),
              ('Loss of Precision', 2, None, '___sec29'),
              ('Loss of numerical precision', 2, None, '___sec30'),
              ('Loss of numerical precision', 2, None, '___sec31'),
              ('Loss of numerical precision', 2, None, '___sec32'),
              ('Loss of precision can cause serious problems',
               2,
               None,
               '___sec33'),
              ('Loss of precision, real numbers', 2, None, '___sec34'),
              ('Roundoff errors', 3, None, '___sec35'),
              ('More on loss of precision', 2, None, '___sec36'),
              ('A problematic case', 2, None, '___sec37'),
              ('"Program":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program4.cpp" to compute $\\exp{(-x)}$',
               2,
               None,
               '___sec38'),
              ('Program to compute $\\exp{(-x)}$', 2, None, '___sec39'),
              ('Program to compute $\\exp{(-x)}$', 2, None, '___sec40'),
              ('Results $\\exp{(-x)}$', 2, None, '___sec41'),
              ('"Program":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program5.cpp" to compute $\\exp{(-x)}$',
               2,
               None,
               '___sec42'),
              ('Program to compute $\\exp{(-x)}$', 2, None, '___sec43'),
              ('Results $\\exp{(-x)}$', 2, None, '___sec44'),
              ('Most used formula for derivatives', 2, None, '___sec45'),
              ('Error Analysis', 2, None, '___sec46'),
              ('Error Analysis', 2, None, '___sec47'),
              ('Error Analysis', 2, None, '___sec48'),
              ('Error Analysis', 2, None, '___sec49'),
              ('Error Analysis', 2, None, '___sec50'),
              ('Error Analysis', 2, None, '___sec51'),
              ('Technical Matter in C/C++: Pointers', 2, None, '___sec52'),
              ('Technical Matter in C/C++: "Pointer example I":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program7.cpp"',
               2,
               None,
               '___sec53'),
              ('Dissection: Pointer example I', 2, None, '___sec54'),
              ('"Pointer example II":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program8.cpp"',
               2,
               None,
               '___sec55'),
              ('Dissection: Pointer example II', 2, None, '___sec56'),
              ('Output of Pointer example II', 2, None, '___sec57'),
              ('File handling; C-way', 2, None, '___sec58'),
              ('File handling; C way cont.', 2, None, '___sec59'),
              ('File handling, C++-way', 2, None, '___sec60'),
              ('File handling, C++-way', 2, None, '___sec61'),
              ('File handling, C++-way', 2, None, '___sec62'),
              ('File handling, C++-way', 2, None, '___sec63'),
              ('File handling, C++-way', 2, None, '___sec64'),
              ('Call by value or reference', 2, None, '___sec65'),
              ('Call by value or reference', 2, None, '___sec66'),
              ('Call by value and reference, F90/95', 2, None, '___sec67'),
              ('"Example codes in c++, dynamic memory allocation":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program4.cpp"',
               2,
               None,
               '___sec68'),
              ('"Example codes in c++, writing to file and dynamic allocation for arrays":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program5.cpp"',
               2,
               None,
               '___sec69'),
              ('"Example codes in c++, transfer of data using call by value and call by reference":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program6.cpp"',
               2,
               None,
               '___sec70'),
              ('"Example codes in c++, operating on several arrays and printing time used":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp"',
               2,
               None,
               '___sec71')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- ------------------- main content ---------------------- -->



<center><h1>Computational Physics Lectures:  Introduction to programming (C++ and Fortran)</h1></center>  <!-- document title -->

<p>
<!-- author(s): Morten Hjorth-Jensen -->

<center>
<b>Morten Hjorth-Jensen</b> [1, 2]
</center>

<p>
<!-- institution(s) -->

<center>[1] <b>Department of Physics, University of Oslo</b></center>
<center>[2] <b>Department of Physics and Astronomy and National Superconducting Cyclotron Laboratory, Michigan State University</b></center>
<br>
<p>
<center><h4>2017</h4></center> <!-- date -->
<br>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec0">Extremely useful tools, strongly recommended </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>and discussed at the lab sessions the first two weeks.</b>
<p>

<ul>
  <li> GIT for version control, discussed at the lab this week (and next week as well)</li>
  <li> ipython notebook, mentioned this week</li> 
  <li> QTcreator for editing and mastering computational projects</li>
  <li> Armadillo as a useful numerical library for C++, highly recommended</li>
  <li> Unit tests</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec1">A structured programming approach </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <li> Before writing a single line, have the algorithm clarified and understood. It is crucial to have a logical structure of e.g., the flow and organization of data before one starts writing.</li>
  <li> Always try to choose the simplest algorithm. Computational speed can be improved upon later.</li>
  <li> Try to write a as clear program as possible. Such programs are easier to debug, and although it may take more time, in the long run it may save you time. If you collaborate with other people, it reduces spending time on debuging and trying to understand what the codes do. A clear program will also allow you to remember better what the program really does!</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec2">A structured programming approach </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <li> The planning of the program should be from top down to bottom, trying to keep the flow as linear as possible. Avoid jumping back and forth in the program. First you need to arrange the major tasks to be achieved. Then try to break the major tasks into subtasks. These can be represented by functions or subprograms. They should accomplish limited tasks and as far as possible be independent of each other. That will allow you to use them in other programs as well.</li>
  <li> Try always to find some cases where an analytical solution exists or where simple test cases can be applied. If possible, devise different algorithms for solving the same problem. If you get the same answers, you may have coded things correctly or made the same error twice or more.</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec3">Getting Started </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Compiling and linking, without QTcreator.</b>
<p>
In order to obtain an executable file for a C++ program, the following
instructions under Linux/Unix can be used

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>c++ -c -Wall myprogram.cpp
c++ -o myprogram myprogram.o
</pre></div>
<p>
where the compiler is called through the command c++/g++. The compiler
option -Wall means that a warning is issued in case of non-standard
language. The executable file is in this case <code>myprogram</code>. The option
<code>-c</code> is for compilation only, where the program is translated into machine code,
while the <code>-o</code> option links the produced object file <code>myprogram.o</code>
and produces the executable <code>myprogram</code> .

<p>
For Fortran2008 we use the Intel compiler, replace <code>c++</code> with <code>ifort</code>.
Also, to speed up the code use compile options like

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>c++ -O3 -c -Wall myprogram.cpp
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec4">Makefiles and simple scripts </h2>

<p>
Under Linux/Unix it is often convenient to create a
so-called makefile, which is a script which includes possible
compiling commands.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b"># Comment lines</span>
<span style="color: #1e889b"># General makefile for c - choose PROG =   name of given program</span>
<span style="color: #1e889b"># Here we define compiler option, libraries and the  target</span>
CC= g++ -Wall
PROG= myprogram
<span style="color: #1e889b"># this is the math library in C, not necessary for C++</span>
LIB = -lm
<span style="color: #1e889b"># Here we make the executable file</span>
<span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG} :          <span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}.o
                   <span style="color: #a61717; background-color: #e3d2d2">$</span>{CC} <span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}.o <span style="color: #a61717; background-color: #e3d2d2">$</span>{LIB} -o <span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}
<span style="color: #1e889b"># whereas here we create the object file</span>
<span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}.o :       <span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}.c
                  <span style="color: #a61717; background-color: #e3d2d2">$</span>{CC} -c <span style="color: #a61717; background-color: #e3d2d2">$</span>{PROG}.c
</pre></div>
<p>
If you name your file for <code>makefile</code>, simply type the command
<code>make</code> and Linux/Unix executes all of the statements in the above
makefile. Note that C++ files have the extension <code>.cpp</code>.

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec5"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program1.cpp" target="_blank">Hello world</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>The C encounter.</b>
<p>
Here we present first the C version.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #228B22">/* comments in C begin like this and end with */</span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;stdlib.h&gt; /* atof function */</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;math.h&gt;   /* sine function */</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;stdio.h&gt;  /* printf function */</span><span style="color: #1e889b"></span>
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">double</span> r, s;        <span style="color: #228B22">/* declare variables */</span>
  r = atof(argv[<span style="color: #B452CD">1</span>]);  <span style="color: #228B22">/* convert the text argv[1] to double */</span>
  s = sin(r);
  printf(<span style="color: #CD5555">&quot;Hello, World! sin(%g)=%g\n&quot;</span>, r, s);
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;           <span style="color: #228B22">/* success execution of the program */</span>
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec6">Hello World, dissecting the code </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Dissection I.</b>
<p>
The compiler must see a declaration of a function before you can
call it (the compiler checks the argument and return types).
The declaration of library functions appears
in so-called &quot;header files&quot; that must be included in the program, e.g.,

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>   <span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;stdlib.h&gt; /* atof function */</span><span style="color: #1e889b"></span>
</pre></div>
<p>
We call three functions (atof, sin, printf)
and these are declared in three different header files.
The main program is a function called main
with a return value set to an integer, int (0 if success).
The operating system stores the return value,
and other programs/utilities can check whether
the execution was successful or not.
The command-line arguments are transferred to the main function through

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>   <span style="color: #a7a7a7; font-weight: bold">int</span> main (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec7">Hello World, more dissection </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Dissection II.</b>
<p>
The command-line arguments are transferred to the main function through

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>   <span style="color: #a7a7a7; font-weight: bold">int</span> main (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
</pre></div>
<p>
The integer <code>argc</code> is the no of command-line arguments, set to
one in our case, while
<code>argv</code> is a vector of strings containing the command-line arguments
with <code>argv[0]</code> containing  the name of the program
and <code>argv[1]</code>, <code>argv[2]</code>, ... are the command-line args, i.e., the number of
lines of input to the program.
Here we define floating points, see also below,
through the keywords <code>float</code> for single precision real numbers and
<code>double</code> for double precision. The function
<code>atof</code> transforms a text (<code>argv[1]</code>) to a float.
The sine function is declared in math.h, a library which
is not automatically included and needs to be linked when computing
an executable file.

<p>
With the command <code>printf</code> we obtain a formatted printout.
The <code>printf</code> syntax is used for formatting output
in many C-inspired languages (Perl, Python, Awk, partly C++).
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec8">Hello World </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Now in C++.</b>
<p>
Here we present first the C++ version.
<p>

<!-- code=c++ (!bc cpppro) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #228B22">// A comment line begins like this in C++ programs</span>
<span style="color: #228B22">// Standard ANSI-C++ include files</span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;   // input and output</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;      // math functions</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std;
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #228B22">// convert the text argv[1] to double using atof:</span>
  <span style="color: #a7a7a7; font-weight: bold">double</span> r = atof(argv[<span style="color: #B452CD">1</span>]);  <span style="color: #228B22">/* convert the text argv[1] to double */</span>
  <span style="color: #a7a7a7; font-weight: bold">double</span> s = sin(r);
  cout &lt;&lt; <span style="color: #CD5555">&quot;Hello, World! sin(&quot;</span> &lt;&lt; r &lt;&lt; <span style="color: #CD5555">&quot;) =&quot;</span> &lt;&lt; s &lt;&lt; endl;
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;           <span style="color: #228B22">/* success execution of the program */</span>
}
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec9">C++ Hello World </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Dissection I.</b>
<p>
We have replaced the call to <code>printf</code> with the standard C++ function
<code>cout</code>. The header file <code>&lt;iostream.h&gt;</code> is then needed.
In addition, we don't need to
declare variables like <code>r</code> and <code>s</code>  at the beginning of the program.
I personally prefer
however to declare all variables at the beginning of a function, as this
gives <em>me</em> a feeling of greater readability.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec10">Brief summary </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>C/C++ program.</b>
<p>

<ul>
  <li> A C/C++ program begins with include statements of header files (libraries,intrinsic functions etc)</li>
  <li> Functions which are used are normally defined at top (details next week)</li>
  <li> The main program is set up as an integer, it returns 0 (everything correct) or 1 (something went wrong)</li>
  <li> Standard <code>if</code>, <code>while</code> and <code>for</code> statements as in Java, Fortran, Python...</li>
  <li> Integers have a very limited range.</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec11">Brief summary </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Arrays.</b>
<p>

<ul>
  <li> A C/C++ array begins by indexing at 0!</li>
  <li> Array allocations are done by size, not by the final index value.If you allocate an array with 10 elements, you should index them from \( 0,1,\dots, 9 \).</li>
  <li> Initialize always an array before a computation.</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec12">Serious problems and representation of numbers </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Integer and Real Numbers.</b>
<p>

<ul>
  <li> Overflow</li>
  <li> Underflow</li>
  <li> Roundoff errors</li>
  <li> Loss of precision</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec13">Limits, you must declare variables </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>C++ and Fortran declarations.</b>
<p>

<p>
<table border="1">
<thead>
<tr><th align="center">    type in C/C++ and Fortran2008    </th> <th align="center">bits</th> <th align="center">                        range                         </th> </tr>
</thead>
<tbody>
<tr><td align="left">   <code>int/INTEGER</code> (2)             </td> <td align="center">   16      </td> <td align="left">   -32768 to 32767                                           </td> </tr>
<tr><td align="left">   <code>unsigned int</code>                </td> <td align="center">   16      </td> <td align="left">   0 to 65535                                                </td> </tr>
<tr><td align="left">   <code>signed int</code>                  </td> <td align="center">   16      </td> <td align="left">   -32768 to 32767                                           </td> </tr>
<tr><td align="left">   <code>short int</code>                   </td> <td align="center">   16      </td> <td align="left">   -32768 to 32767                                           </td> </tr>
<tr><td align="left">   <code>unsigned short int</code>          </td> <td align="center">   16      </td> <td align="left">   0 to 65535                                                </td> </tr>
<tr><td align="left">   <code>signed short int</code>            </td> <td align="center">   16      </td> <td align="left">   \( -32768 \) to 32767                                     </td> </tr>
<tr><td align="left">   <code>int/long int/INTEGER</code> (4)    </td> <td align="center">   32      </td> <td align="left">   -2147483648 to 2147483647                                 </td> </tr>
<tr><td align="left">   <code>signed long int</code>             </td> <td align="center">   32      </td> <td align="left">   -2147483648 to 2147483647                                 </td> </tr>
<tr><td align="left">   <code>float/REAL(4)</code>               </td> <td align="center">   32      </td> <td align="left">   \( 3.4\times 10^{-44} \) to \( 3.4\times 10^{+38} \)      </td> </tr>
<tr><td align="left">   <code>double/REAL(8)</code>              </td> <td align="center">   64      </td> <td align="left">   \( 1.7\times 10^{-322} \) to \( 1.7\times 10^{+308} \)    </td> </tr>
<tr><td align="left">   <code>long double</code>                 </td> <td align="center">   64      </td> <td align="left">   \( 1.7\times 10^{-322} \) to \( 1.7\times 10^{+308} \)    </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec14">From decimal to binary representation </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b>How to do it.</b>
<p>

$$
  a_n2^n+a_{n-1}2^{n-1}  +a_{n-2}2^{n-2}  +\dots +a_{0}2^{0}.
$$

<p>
In binary notation we have thus \( (417)_{10} =(110110001)_2 \)
since we have

$$
\begin{align*}
(110100001)_2
&=1\times2^8+1\times 2^{7}+0\times 2^{6}+1\times 2^{5}+0\times 2^{4}+0\times 2^{3}\\
&+0\times 2^{2}+0\times 2^{2}+0\times 2^{1}+1\times 2^{0}.
\end{align*}
$$


</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec15">From decimal to binary representation, the actual operation </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
To see this, we have performed the following divisions by 2

<p>
<table border="1">
<tr></tr>
<tbody>
<tr><td align="center">   417/2=208    </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{0} \) is 1    </td> </tr>
<tr><td align="center">   208/2=104    </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{1} \) is 0    </td> </tr>
<tr><td align="center">   104/2=52     </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{2} \) is 0    </td> </tr>
<tr><td align="center">   52/2=26      </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{3} \) is 0    </td> </tr>
<tr><td align="center">   26/2=13      </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{4} \) is 0    </td> </tr>
<tr><td align="center">   13/2= 6      </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{5} \) is 1    </td> </tr>
<tr><td align="center">   6/2= 3       </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{6} \) is 0    </td> </tr>
<tr><td align="center">   3/2= 1       </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{7} \) is 1    </td> </tr>
<tr><td align="center">   1/2= 0       </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{8} \) is 1    </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec16"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program2.cpp" target="_blank">From decimal to binary representation</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Integer numbers.</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cstdio&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cstdlib&gt;</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std;
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> i; 
  <span style="color: #a7a7a7; font-weight: bold">int</span> terms[<span style="color: #B452CD">32</span>]; <span style="color: #228B22">// storage of a0, a1, etc, up to 32 bits</span>
  <span style="color: #a7a7a7; font-weight: bold">int</span> save;
  <span style="color: #a7a7a7; font-weight: bold">int</span> number = atoi(argv[<span style="color: #B452CD">1</span>]); 
  save = number;
  <span style="color: #228B22">// initialise the term a0, a1 etc</span>
  <span style="color: #8B008B; font-weight: bold">for</span> (i=<span style="color: #B452CD">0</span>; i &lt; <span style="color: #B452CD">32</span> ; i++){ terms[i] = <span style="color: #B452CD">0</span>;}
  <span style="color: #8B008B; font-weight: bold">for</span> (i=<span style="color: #B452CD">0</span>; i &lt; <span style="color: #B452CD">32</span> ; i++){ 
    terms[i] = number%<span style="color: #B452CD">2</span>;
    number /= <span style="color: #B452CD">2</span>;
  }
  <span style="color: #228B22">// write out results</span>
  cout &lt;&lt; <span style="color: #CD5555">&quot;Number of bytes used= &quot;</span> &lt;&lt; <span style="color: #8B008B; font-weight: bold">sizeof</span>(number) &lt;&lt; endl;
  <span style="color: #8B008B; font-weight: bold">for</span> (i=<span style="color: #B452CD">0</span>; i &lt; <span style="color: #B452CD">32</span> ; i++){ 
    cout &lt;&lt; <span style="color: #CD5555">&quot; Term nr: &quot;</span> &lt;&lt; i &lt;&lt; <span style="color: #CD5555">&quot;Value= &quot;</span> &lt;&lt; terms[i];
    cout &lt;&lt; endl;
  }
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;  
}
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec17"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/Fortran/program2.f90" target="_blank">From decimal to binary representation</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Integer numbers, Fortran.</b>
<p>
<p>

<!-- code=fortran (!bc fcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #8B008B; font-weight: bold">PROGRAM </span>binary_integer
<span style="color: #8B008B; font-weight: bold">IMPLICIT NONE</span>
<span style="color: #8B008B; font-weight: bold">  </span><span style="color: #a7a7a7; font-weight: bold">INTEGER  </span>i, number, terms(<span style="color: #B452CD">0</span>:<span style="color: #B452CD">31</span>) <span style="color: #228B22">! storage of a0, a1, etc, up to 32 bits</span>

  <span style="color: #8B008B; font-weight: bold">WRITE</span>(*,*) <span style="color: #CD5555">&#39;Give a number to transform to binary notation&#39;</span>
  <span style="color: #8B008B; font-weight: bold">READ</span>(*,*) number
<span style="color: #228B22">! Initialise the terms a0, a1 etc</span>
  terms = <span style="color: #B452CD">0</span>
<span style="color: #228B22">! Fortran takes only integer loop variables</span>
  <span style="color: #8B008B; font-weight: bold">DO </span>i=<span style="color: #B452CD">0</span>, <span style="color: #B452CD">31</span>
     terms(i) = <span style="color: #658b00">MOD</span>(number,<span style="color: #B452CD">2</span>)
     number = number/<span style="color: #B452CD">2</span>
  ENDDO
<span style="color: #228B22">! write out results</span>
  <span style="color: #8B008B; font-weight: bold">WRITE</span>(*,*) <span style="color: #CD5555">&#39;Binary representation &#39;</span>
  <span style="color: #8B008B; font-weight: bold">DO </span>i=<span style="color: #B452CD">0</span>, <span style="color: #B452CD">31</span>
    <span style="color: #8B008B; font-weight: bold">WRITE</span>(*,*)<span style="color: #CD5555">&#39; Term nr and value&#39;</span>, i, terms(i)
  ENDDO

<span style="color: #8B008B; font-weight: bold">END PROGRAM </span>binary_integer
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec18"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program3.cpp" target="_blank">Representing Integer Numbers</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Possible Overflow for Integers.</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #228B22">// A comment line begins like this in C++ programs</span>
<span style="color: #228B22">// Program to calculate 2**n</span>
<span style="color: #228B22">// Standard ANSI-C++ include files */</span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>()
{
   <span style="color: #a7a7a7; font-weight: bold">int</span>  int1, int2, int3;
<span style="color: #228B22">// print to screen</span>
   cout &lt;&lt; <span style="color: #CD5555">&quot;Read in the exponential N for 2^N =&quot;</span> &lt;&lt; endl;
<span style="color: #228B22">// read from screen</span>
   cin &gt;&gt; int2;
   int1 = (<span style="color: #a7a7a7; font-weight: bold">int</span>) pow(<span style="color: #B452CD">2.</span>, (<span style="color: #a7a7a7; font-weight: bold">double</span>) int2);
   cout &lt;&lt; <span style="color: #CD5555">&quot; 2^N * 2^N = &quot;</span> &lt;&lt; int1*int1 &lt;&lt; endl;
   int3 = int1 - <span style="color: #B452CD">1</span>;
   cout &lt;&lt; <span style="color: #CD5555">&quot; 2^N*(2^N - 1) = &quot;</span> &lt;&lt; int1 * int3  &lt;&lt; endl;
   cout &lt;&lt; <span style="color: #CD5555">&quot; 2^N- 1 = &quot;</span> &lt;&lt; int3  &lt;&lt; endl;
   <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;

<span style="color: #228B22">// End: program main()</span>
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec19">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
In the decimal system we would write a number like \( 9.90625 \)
in what is called the normalized scientific notation.

$$
  9.90625=0.990625\times 10^{1},
$$

and a real non-zero number could be generalized as

$$
\begin{equation}
    x=\pm r\times 10^{{\mbox{n}}},
\label{_auto1}
\end{equation}
$$

with \( r \) a number in the range \( 1/10 \le r < 1 \).
In a similar way we can use represent a binary number in
scientific notation as

$$
\begin{equation}
    x=\pm q\times 2^{{\mbox{m}}},
\label{_auto2}
\end{equation}
$$

with \( q \) a number in the range \( 1/2 \le q < 1 \).
This means that the mantissa of a binary number would be represented by
the general formula
$$
\begin{equation}
(0.a_{-1}a_{-2}\dots a_{-n})_2=a_{-1}\times 2^{-1}
+a_{-2}\times 2^{-2}+\dots+a_{-n}\times 2^{-n}.
\label{_auto3}
\end{equation}
$$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec20">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
In a typical computer, floating-point numbers are represented
in the way described above, but with certain restrictions
on \( q \) and \( m \) imposed by the available word length.
In the machine, our
number \( x \) is represented as

$$
\begin{equation}
    x=(-1)^s\times {\mbox{mantissa}}\times 2^{{\mbox{exponent}}},
\label{_auto4}
\end{equation}
$$

<p>
where \( s \) is the sign bit, and the exponent gives the available range.
With a single-precision word, 32 bits, 8 bits would typically be reserved
for the exponent,  1 bit for the sign and 23 for the mantissa.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec21">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
A modification of the scientific notation for binary numbers is to
require that the leading binary digit 1 appears to the left of the binary point.
In this case the representation of the mantissa \( q \) would be
\( (1.f)_2 \) and $ 1 \le q < 2$. This form is rather useful when storing
binary numbers in a computer word, since we can always assume that the leading
bit 1 is there. One bit of space can then be saved meaning that a 23 bits
mantissa has actually 24 bits. This means explicitely that a binary number with 23 bits
for the mantissa reads

$$
\begin{equation}
(1.a_{-1}a_{-2}\dots a_{-23})_2=1\times 2^0+a_{-1}\times 2^{-1}+
+a_{-2}\times 2^{-2}+\dots+a_{-23}\times 2^{-23}.
\label{_auto5}
\end{equation}
$$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec22">Loss of Precision, example </h2>
As an example, consider the 32 bits binary number
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
$$
(10111110111101000000000000000000)_2,
$$

where the first bit is reserved for the sign, 1 in this case yielding a
negative sign. The exponent \( m \) is given by the next 8 binary numbers
\( 01111101 \) resulting in 125 in the decimal system.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec23">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
However, since the
exponent has eight bits, this means it has  \( 2^8-1=255 \) possible numbers in the interval
\( -128 \le m \le 127 \), our final
exponent is \( 125-127=-2 \) resulting in \( 2^{-2} \).
Inserting the sign and the mantissa yields the final number in the decimal representation as

$$
 -2^{-2}\left(1\times 2^0+1\times 2^{-1}+
1\times 2^{-2}+1\times 2^{-3}+0\times 2^{-4}+1\times 2^{-5}\right)=$$


$$
(-0.4765625)_{10}.
$$

In this case we have an exact machine representation with 32 bits (actually, we need less than
23 bits for the mantissa).
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec24">Loss of Precision, consequences </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
If our number \( x \) can be exactly represented in the machine, we call
\( x \) a machine number. Unfortunately, most numbers cannot  and are thereby
only approximated in the machine. When such a number occurs as the result
of reading some input data or of a computation, an inevitable error
will arise in representing it as accurately as possible by
a machine number.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec25">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
A floating number x, labelled \( fl(x) \) will therefore always be represented as

$$
\begin{equation}
  fl(x) = x(1\pm \epsilon_x),
\label{_auto6}
\end{equation}
$$

with \( x \) the exact number and the error \( |\epsilon_x| \le |\epsilon_M| \), where
\( \epsilon_M \) is the precision assigned. A number like \( 1/10 \) has no exact binary representation
with single or double precision. Since the mantissa

$$
\left(1.a_{-1}a_{-2}\dots a_{-n}\right)_2
$$

is always truncated at some stage \( n \) due to its limited number of bits, there is only a
limited number of real binary numbers. The spacing between every real binary number is given by the
chosen machine precision.
For a 32 bit words this number is approximately
$ \epsilon_M \sim 10^{-7}$ and for double precision (64 bits) we have
$ \epsilon_M \sim 10^{-16}$, or in terms of a binary base
as \( 2^{-23} \) and \( 2^{-52} \) for single and double precision, respectively.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec26">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
In the machine a number is represented as

$$
\begin{equation}
  fl(x)= x(1+\epsilon)
\label{_auto7}
\end{equation}
$$

<p>
where \( |\epsilon| \leq \epsilon_M \) and \( \epsilon \) is given by the
specified precision, \( 10^{-7} \) for single and \( 10^{-16} \) for double
precision, respectively.
\( \epsilon_M \) is the given precision.
In case of a subtraction \( a=b-c \), we have

$$
\begin{equation}
   fl(a)=fl(b)-fl(c) = a(1+\epsilon_a),
\label{_auto8}
\end{equation}
$$

or
$$
\begin{equation}
   fl(a)=b(1+\epsilon_b)-c(1+\epsilon_c),
\label{_auto9}
\end{equation}
$$
</div>

<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec27">Loss of Precision </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
The above means that
$$
\begin{equation}
   fl(a)/a=1+\epsilon_b\frac{b}{a}- \epsilon_c\frac{c}{a},
\label{_auto10}
\end{equation}
$$

<p>
and if \( b\approx c \) we see that there is a potential for an increased
error in \( fl(a) \).
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec28">Loss of Precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Machine Numbers.</b>
<p>
Define
the absolute error as
$$
\begin{equation}
   |fl(a)-a|,
\label{_auto11}
\end{equation}
$$

whereas the relative error is
$$
\begin{equation}
   \frac{ |fl(a)-a|}{a} \le \epsilon_a.
\label{_auto12}
\end{equation}
$$
</div>

<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec29">Loss of Precision </h2>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
The above subraction is thus

$$
\begin{equation}
   \frac{ |fl(a)-a|}{a}=\frac{ |fl(b)-fl(c)-(b-c)|}{a},
\label{_auto13}
\end{equation}
$$

yielding

$$
\begin{equation}
   \frac{ |fl(a)-a|}{a}=\frac{ |b\epsilon_b- c\epsilon_c|}{a}.
\label{_auto14}
\end{equation}
$$

The relative error
is the quantity of interest in scientific work. Information about the
absolute error is normally of little use in the absence of the magnitude
of the quantity being measured.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec30">Loss of numerical precision </h2>

<p>
Suppose we wish to evaluate the function

$$
   f(x)=\frac{1-\cos(x)}{\sin(x)},
$$

for small values of \( x \). Five leading digits. If we multiply the denominator and numerator
with \( 1+\cos(x) \) we obtain the equivalent expression

$$
   f(x)=\frac{\sin(x)}{1+\cos(x)}.
$$

<p>
If we now choose \( x=0.007 \) (in radians) our choice of precision results in

$$
   \sin(0.007)\approx 0.69999\times 10^{-2},
$$

and

$$
   \cos(0.007)\approx 0.99998.
$$

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec31">Loss of numerical precision </h2>

<p>
The first expression for \( f(x) \) results in

$$
   f(x)=\frac{1-0.99998}{0.69999\times 10^{-2}}=\frac{0.2\times 10^{-4}}{0.69999\times 10^{-2}}=0.28572\times 10^{-2},
$$

while the second expression results in

$$
   f(x)=\frac{0.69999\times 10^{-2}}{1+0.99998}=
\frac{0.69999\times 10^{-2}}{1.99998}=0.35000\times 10^{-2},
$$

which is also the exact result. In the first expression, due to our
choice of precision, we have
only one relevant digit in the numerator, after the
subtraction. This leads to a loss of precision and a wrong result due to
a cancellation of two nearly equal numbers.
If we had chosen a precision of six leading digits, both expressions
yield the same answer.

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec32">Loss of numerical precision </h2>

<p>
If we were to evaluate \( x\sim \pi \), then the second expression for \( f(x) \)
can lead to potential losses of precision due to cancellations of nearly
equal numbers.

<p>
This simple example demonstrates  the loss of numerical precision due
to roundoff errors, where the number of leading digits is lost
in a subtraction of two near equal numbers.
The lesson to be drawn is that we cannot blindly compute a function.
We will always need to carefully analyze our algorithm in the search for
potential pitfalls. There is no magic recipe however, the only guideline
is an understanding of the fact that a machine cannot represent
correctly <em>all</em> numbers.

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec33">Loss of precision can cause serious problems </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Real Numbers.</b>
<p>

<ul>
  <li> <b>Overflow</b>: When the positive exponent exceeds the max value, e.g., 308 for <code>DOUBLE PRECISION</code> (64 bits). Under such circumstances the program will terminate and some compilers may give you the warning <code>OVERFLOW</code>.</li>
  <li> <b>Underflow</b>: When the negative exponent becomes smaller than the min value, e.g., -308 for <code>DOUBLE PRECISION</code>. Normally, the variable is then set to zero and the program continues. Other compilers (or compiler options) may warn you with the <code>UNDERFLOW</code> message and the program terminates.</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec34">Loss of precision, real numbers </h2>

<h3 id="___sec35">Roundoff errors </h3>

<p>
A floating point number like

$$
\begin{equation}
   x= 1.234567891112131468 = 0.1234567891112131468\times 10^{1}
\label{_auto15}
\end{equation}
$$

may be stored in the following way. The exponent is  small
and is stored in full precision. However,
the mantissa is not stored fully. In double precision (64 bits), digits
beyond the
15th are lost since the mantissa is normally stored in two words,
one which is the most significant one representing
123456 and the least significant one containing 789111213. The digits
beyond 3 are lost. Clearly, if we are summing alternating series
with large numbers, subtractions between two large numbers may lead
to roundoff errors, since not all relevant digits are kept.
This leads eventually to the next problem, namely

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec36">More on loss of precision </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Real Numbers.</b>
<p>

<ul>
  <li> <b>Loss of precision</b>: When one has to e.g., multiply two large numbers where one suspects that the outcome may be beyond the bonds imposed by the variable declaration, one could represent the numbers by logarithms, or rewrite the equations to be solved in terms of dimensionless variables. When dealing with problems in e.g., particle physics or nuclear physics where distance is measured in fm (\( 10^{-15} \) m), it can be quite convenient to redefine the variables for distance in terms of a dimensionless variable of the order of unity. To give an example, suppose you work with single precision and wish to perform the addition \( 1+10^{-8} \). In this case, the information containing in \( 10^{-8} \) is simply lost in the addition. Typically, when performing the addition, the computer equates first the exponents of the two numbers to be added. For \( 10^{-8} \) this has however catastrophic consequences since in order to obtain an exponent equal to \( 10^0 \), bits in the mantissa are shifted to the right. At the end, all bits in the mantissa are zeros.</li>
</ul>
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec37">A problematic case </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Three ways of computing \( e^{-x} \).</b>
<p>
Brute force:

$$\exp{(-x)}=\sum_{n=0}^{\infty}(-1)^n\frac{x^n}{n!}$$

<p>
Recursion relation for

$$ \exp{(-x)}=\sum_{n=0}^{\infty}s_n=\sum_{n=0}^{\infty}(-1)^n\frac{x^n}{n!} $$


$$ s_n=-s_{n-1}\frac{x}{n}, $$


$$ \exp{(x)}=\sum_{n=0}^{\infty}s_n $$


$$ \exp{(-x)}=\frac{1}{\exp{(x)}} $$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec38"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program4.cpp" target="_blank">Program</a> to compute \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Brute Force.</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #228B22">// Program to calculate function exp(-x)</span>
<span style="color: #228B22">// using straightforward summation with differing  precision</span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #228B22">// type float:  32 bits precision</span>
<span style="color: #228B22">// type double: 64 bits precision</span>
<span style="color: #1e889b">#define   TYPE          double</span>
<span style="color: #1e889b">#define   PHASE(a)      (1 - 2 * (abs(a) % 2))</span>
<span style="color: #1e889b">#define   TRUNCATION    1.0E-10</span>
<span style="color: #228B22">// function declaration</span>
TYPE factorial(<span style="color: #a7a7a7; font-weight: bold">int</span>);
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec39">Program to compute \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Still Brute Force.</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>()
{
   <span style="color: #a7a7a7; font-weight: bold">int</span>   n;
   TYPE  x, term, sum;
   <span style="color: #8B008B; font-weight: bold">for</span>(x = <span style="color: #B452CD">0.0</span>; x &lt; <span style="color: #B452CD">100.0</span>; x += <span style="color: #B452CD">10.0</span>)  {
     sum  = <span style="color: #B452CD">0.0</span>;                <span style="color: #228B22">//initialization</span>
     n    = <span style="color: #B452CD">0</span>;
     term = <span style="color: #B452CD">1</span>;
     <span style="color: #8B008B; font-weight: bold">while</span>(fabs(term) &gt; TRUNCATION)  {
         term =  PHASE(n) * (TYPE) pow((TYPE) x,(TYPE) n)
                / factorial(n);
         sum += term;
         n++;
     }  <span style="color: #228B22">// end of while() loop</span>
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec40">Program to compute \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Oh, it never ends!</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>      printf(<span style="color: #CD5555">&quot;\nx = %4.1f   exp = %12.5E  series = %12.5E</span>
              number of terms = %d<span style="color: #CD5555">&quot;,</span>
              x, exp(-x), sum, n);
   } <span style="color: #228B22">// end of for() loop</span>

   printf(<span style="color: #CD5555">&quot;\n&quot;</span>);           <span style="color: #228B22">// a final line shift on output</span>
   <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
} <span style="color: #228B22">// End: function main()</span>
<span style="color: #228B22">//     The function factorial()</span>
<span style="color: #228B22">//     calculates and returns n!</span>
TYPE factorial(<span style="color: #a7a7a7; font-weight: bold">int</span> n)
{
   <span style="color: #a7a7a7; font-weight: bold">int</span>  loop;
   TYPE fac;
   <span style="color: #8B008B; font-weight: bold">for</span>(loop = <span style="color: #B452CD">1</span>, fac = <span style="color: #B452CD">1.0</span>; loop &lt;= n; loop++)  {
      fac *= loop;

   <span style="color: #8B008B; font-weight: bold">return</span> fac;
} <span style="color: #228B22">// End: function factorial()</span>
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec41">Results \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>What is going on?</b>
<p>

<p>
<table border="1">
<thead>
<tr><td align="center">\( x \)</td> <td align="center">\( \exp{(-x)} \)</td> <th align="center">    Series   </th> <th align="center">Number of terms in series</th> </tr>
</thead>
<tbody>
<tr><td align="center">   0.0        </td> <td align="center">   0.100000E+01        </td> <td align="center">   0.100000E+01     </td> <td align="center">   1                            </td> </tr>
<tr><td align="center">   10.0       </td> <td align="center">   0.453999E-04        </td> <td align="center">   0.453999E-04     </td> <td align="center">   44                           </td> </tr>
<tr><td align="center">   20.0       </td> <td align="center">   0.206115E-08        </td> <td align="center">   0.487460E-08     </td> <td align="center">   72                           </td> </tr>
<tr><td align="center">   30.0       </td> <td align="center">   0.935762E-13        </td> <td align="center">   -0.342134E-04    </td> <td align="center">   100                          </td> </tr>
<tr><td align="center">   40.0       </td> <td align="center">   0.424835E-17        </td> <td align="center">   -0.221033E+01    </td> <td align="center">   127                          </td> </tr>
<tr><td align="center">   50.0       </td> <td align="center">   0.192875E-21        </td> <td align="center">   -0.833851E+05    </td> <td align="center">   155                          </td> </tr>
<tr><td align="center">   60.0       </td> <td align="center">   0.875651E-26        </td> <td align="center">   -0.850381E+09    </td> <td align="center">   171                          </td> </tr>
<tr><td align="center">   70.0       </td> <td align="center">   0.397545E-30        </td> <td align="center">   NaN              </td> <td align="center">   171                          </td> </tr>
<tr><td align="center">   80.0       </td> <td align="center">   0.180485E-34        </td> <td align="center">   NaN              </td> <td align="center">   171                          </td> </tr>
<tr><td align="center">   90.0       </td> <td align="center">   0.819401E-39        </td> <td align="center">   NaN              </td> <td align="center">   171                          </td> </tr>
<tr><td align="center">   100.0      </td> <td align="center">   0.372008E-43        </td> <td align="center">   NaN              </td> <td align="center">   171                          </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec42"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program5.cpp" target="_blank">Program</a> to compute \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #228B22">// program to compute exp(-x) without exponentials</span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#define  TRUNCATION     1.0E-10</span>

<span style="color: #a7a7a7; font-weight: bold">int</span> main()
{
   <span style="color: #a7a7a7; font-weight: bold">int</span>       loop, n;
   <span style="color: #a7a7a7; font-weight: bold">double</span>    x, term, sum;
   <span style="color: #8B008B; font-weight: bold">for</span>(loop = <span style="color: #B452CD">0</span>; loop &lt;= <span style="color: #B452CD">100</span>; loop += <span style="color: #B452CD">10</span>)
   {
     x    = (<span style="color: #a7a7a7; font-weight: bold">double</span>) loop;          <span style="color: #228B22">// initialization</span>
     sum  = <span style="color: #B452CD">1.0</span>;
     term = <span style="color: #B452CD">1</span>;
     n    = <span style="color: #B452CD">1</span>;
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec43">Program to compute \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Last statements.</b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>     <span style="color: #8B008B; font-weight: bold">while</span>(fabs(term) &gt; TRUNCATION)
       {
	 term *= -x/((<span style="color: #a7a7a7; font-weight: bold">double</span>) n);
	 sum  += term;
	 n++;
       } <span style="color: #228B22">// end while loop</span>
     cout &lt;&lt; <span style="color: #CD5555">&quot;x = &quot;</span> &lt;&lt; x   &lt;&lt; <span style="color: #CD5555">&quot; exp = &quot;</span> &lt;&lt; exp(-x) &lt;&lt;<span style="color: #CD5555">&quot;series = &quot;</span>
          &lt;&lt; sum  &lt;&lt; <span style="color: #CD5555">&quot; number of terms =&quot;</span> &lt;&lt; n &lt;&lt; endl;
   } <span style="color: #228B22">// end of for() loop</span>

   cout &lt;&lt; endl;           <span style="color: #228B22">// a final line shift on output</span>

}  <span style="color: #228B22">/*    End: function main() */</span>
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec44">Results \( \exp{(-x)} \) </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>More Problems.</b>
<p>

<p>
<table border="1">
<thead>
<tr><td align="center"> \( x \)  </td> <td align="center">\( \exp{(-x)} \)</td> <th align="center">     Series    </th> <th align="center">Number of terms in series</th> </tr>
</thead>
<tbody>
<tr><td align="center">   0.000000      </td> <td align="center">   0.10000000E+01      </td> <td align="center">   0.10000000E+01     </td> <td align="center">   1                            </td> </tr>
<tr><td align="center">   10.000000     </td> <td align="center">   0.45399900E-04      </td> <td align="center">   0.45399900E-04     </td> <td align="center">   44                           </td> </tr>
<tr><td align="center">   20.000000     </td> <td align="center">   0.20611536E-08      </td> <td align="center">   0.56385075E-08     </td> <td align="center">   72                           </td> </tr>
<tr><td align="center">   30.000000     </td> <td align="center">   0.93576230E-13      </td> <td align="center">   -0.30668111E-04    </td> <td align="center">   100                          </td> </tr>
<tr><td align="center">   40.000000     </td> <td align="center">   0.42483543E-17      </td> <td align="center">   -0.31657319E+01    </td> <td align="center">   127                          </td> </tr>
<tr><td align="center">   50.000000     </td> <td align="center">   0.19287498E-21      </td> <td align="center">   0.11072933E+05     </td> <td align="center">   155                          </td> </tr>
<tr><td align="center">   60.000000     </td> <td align="center">   0.87565108E-26      </td> <td align="center">   -0.33516811E+09    </td> <td align="center">   182                          </td> </tr>
<tr><td align="center">   70.000000     </td> <td align="center">   0.39754497E-30      </td> <td align="center">   -0.32979605E+14    </td> <td align="center">   209                          </td> </tr>
<tr><td align="center">   80.000000     </td> <td align="center">   0.18048514E-34      </td> <td align="center">   0.91805682E+17     </td> <td align="center">   237                          </td> </tr>
<tr><td align="center">   90.000000     </td> <td align="center">   0.81940126E-39      </td> <td align="center">   -0.50516254E+22    </td> <td align="center">   264                          </td> </tr>
<tr><td align="center">   100.000000    </td> <td align="center">   0.37200760E-43      </td> <td align="center">   -0.29137556E+26    </td> <td align="center">   291                          </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec45">Most used formula for derivatives </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>3 point formulae.</b>
<p>
First derivative  (\( f_0 = f(x_0) \), \( f_{-h}=f(x_0-h) \) and \( f_{+h}=f(x_0+h) \)

$$
   \frac{f_h-f_{-h}}{2h}=f'_0+\sum_{j=1}^{\infty}\frac{f_0^{(2j+1)}}{(2j+1)!}h^{2j}.
$$

Second derivative

$$
 \frac{ f_h -2f_0 +f_{-h}}{h^2}=f_0''+2\sum_{j=1}^{\infty}\frac{f_0^{(2j+2)}}{(2j+2)!}h^{2j}.
$$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec46">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
$$
   \epsilon=log_{10}\left(\left|\frac{f''_{\mbox{computed}}-f''_{\mbox{exact}}}
                 {f''_{\mbox{exact}}}\right|\right),
$$


$$
   \epsilon_{\mbox{tot}}=\epsilon_{\mbox{approx}}+\epsilon_{\mbox{ro}}.
$$

<p>
For the computed second derivative  we have

$$
 f_0''=\frac{ f_h -2f_0 +f_{-h}}{h^2}-2\sum_{j=1}^{\infty}\frac{f_0^{(2j+2)}}{(2j+2)!}h^{2j},
$$

and the truncation or approximation error goes like

$$
  \epsilon_{\mbox{approx}}\approx \frac{f_0^{(4)}}{12}h^{2}.
$$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec47">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
If we were not to worry about loss of precision, we could in principle
make \( h \) as small as possible.
However, due to the computed expression in the above program example

$$
 f_0''=\frac{ f_h -2f_0 +f_{-h}}{h^2}=\frac{ (f_h -f_0) +(f_{-h}-f_0)}{h^2},
$$

we reach fairly quickly a limit for where loss of precision due to the subtraction
of two nearly equal numbers becomes crucial.

<p>
If \( (f_{\pm h} -f_0) \) are very close, we have
\( (f_{\pm h} -f_0)\approx \epsilon_M \), where \( |\epsilon_M|\le 10^{-7} \) for single and
\( |\epsilon_M|\le 10^{-15} \) for double precision, respectively.

<p>
We have then

$$
 \left|f_0''\right|=
 \left|\frac{ (f_h -f_0) +(f_{-h}-f_0)}{h^2}\right|\le \frac{ 2 \epsilon_M}{h^2}.
$$
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec48">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Our total error becomes

$$
   \left|\epsilon_{\mbox{tot}}\right|\le  \frac{2 \epsilon_M}{h^2} +
                          \frac{f_0^{(4)}}{12}h^{2}.
\label{eq:experror}
$$

It is then natural to ask which value of \( h \) yields the smallest
total error. Taking the derivative of \( \left|\epsilon_{\mbox{tot}}\right| \)
with respect to \( h \) results in

$$
   h= \left(\frac{ 24\epsilon_M}{f_0^{(4)}}\right)^{1/4}.
$$

With double precision and \( x=10 \) we obtain

$$
   h\approx 10^{-4}.
$$

Beyond this value, it is essentially the loss of numerical precision
which takes over.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec49">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Due to the subtractive cancellation in the expression
for \( f'' \) there is a pronounced detoriation in accuracy as \( h \) is made smaller
and smaller.

<p>
It is instructive in this analysis to rewrite the numerator of
the computed derivative as

$$
   (f_h -f_0) +(f_{-h}-f_0)=(e^{x+h}-e^{x}) + (e^{x-h}-e^{x}),
$$

as

$$
   (f_h -f_0) +(f_{-h}-f_0)=e^x(e^{h}+e^{-h}-2),
$$

since it is the difference \( (e^{h}+e^{-h}-2) \) which causes
the loss of precision.
</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec50">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<p>
<table border="1">
<thead>
<tr><td align="center">\( x \)</td> <td align="center">\( h=0.01 \)</td> <td align="center">\( h=0.001 \)</td> <td align="center">\( h=0.0001 \)</td> <td align="center">\( h=0.0000001 \)</td> <th align="center">  Exact   </th> </tr>
</thead>
<tbody>
<tr><td align="center">   0.0        </td> <td align="center">   1.000008        </td> <td align="center">   1.000000         </td> <td align="center">   1.000000          </td> <td align="center">   1.010303             </td> <td align="center">   1.000000      </td> </tr>
<tr><td align="center">   1.0        </td> <td align="center">   2.718304        </td> <td align="center">   2.718282         </td> <td align="center">   2.718282          </td> <td align="center">   2.753353             </td> <td align="center">   2.718282      </td> </tr>
<tr><td align="center">   2.0        </td> <td align="center">   7.389118        </td> <td align="center">   7.389057         </td> <td align="center">   7.389056          </td> <td align="center">   7.283063             </td> <td align="center">   7.389056      </td> </tr>
<tr><td align="center">   3.0        </td> <td align="center">   20.085704       </td> <td align="center">   20.085539        </td> <td align="center">   20.085537         </td> <td align="center">   20.250467            </td> <td align="center">   20.085537     </td> </tr>
<tr><td align="center">   4.0        </td> <td align="center">   54.598605       </td> <td align="center">   54.598155        </td> <td align="center">   54.598151         </td> <td align="center">   54.711789            </td> <td align="center">   54.598150     </td> </tr>
<tr><td align="center">   5.0        </td> <td align="center">   148.414396      </td> <td align="center">   148.413172       </td> <td align="center">   148.413161        </td> <td align="center">   150.635056           </td> <td align="center">   148.413159    </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec51">Error Analysis </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
The results for \( x=10 \) are shown in the Table

<p>
<table border="1">
<thead>
<tr><td align="center">   \( h \)    </td> <td align="center">\( e^{h}+e^{-h} \)</td> <td align="center">          \( e^{h}+e^{-h}-2 \)         </td> </tr>
</thead>
<tbody>
<tr><td align="center">   \( 10^{-1} \)     </td> <td align="center">   2.0100083361116070    </td> <td align="center">   \( 1.0008336111607230\times 10^{-2} \)     </td> </tr>
<tr><td align="center">   \( 10^{-2} \)     </td> <td align="center">   2.0001000008333358    </td> <td align="center">   \( 1.0000083333605581\times 10^{-4} \)     </td> </tr>
<tr><td align="center">   \( 10^{-3} \)     </td> <td align="center">   2.0000010000000836    </td> <td align="center">   \( 1.0000000834065048\times 10^{-6} \)     </td> </tr>
<tr><td align="center">   \( 10^{-5} \)     </td> <td align="center">   2.0000000099999999    </td> <td align="center">   \( 1.0000000050247593\times 10^{-8} \)     </td> </tr>
<tr><td align="center">   \( 10^{-5} \)     </td> <td align="center">   2.0000000001000000    </td> <td align="center">   \( 9.9999897251734637\times 10^{-11} \)    </td> </tr>
<tr><td align="center">   \( 10^{-6} \)     </td> <td align="center">   2.0000000000010001    </td> <td align="center">   \( 9.9997787827987850\times 10^{-13} \)    </td> </tr>
<tr><td align="center">   \( 10^{-7} \)     </td> <td align="center">   2.0000000000000098    </td> <td align="center">   \( 9.9920072216264089\times 10^{-15} \)    </td> </tr>
<tr><td align="center">   \( 10^{-8} \)     </td> <td align="center">   2.0000000000000000    </td> <td align="center">   \( 0.0000000000000000\times 10^{0} \)      </td> </tr>
<tr><td align="center">   \( 10^{-9} \)     </td> <td align="center">   2.0000000000000000    </td> <td align="center">   \( 1.1102230246251565\times 10^{-16} \)    </td> </tr>
<tr><td align="center">   \( 10^{-10} \)    </td> <td align="center">   2.0000000000000000    </td> <td align="center">   \( 0.0000000000000000\times 10^{0} \)      </td> </tr>
</tbody>
</table>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec52">Technical Matter in C/C++: Pointers </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
A pointer specifies where a value resides in the computer's memory (like a house number specifies where a particular family resides on a street).

<p>
A pointer points to an address not to a data container of any kind!

<p>
Simple example declarations:

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>  <span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std; <span style="color: #228B22">// note use of namespace</span>
  <span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>()
 {
   <span style="color: #228B22">// what are the differences?</span>
   <span style="color: #a7a7a7; font-weight: bold">int</span> var;
   cin &gt;&gt; var;
   <span style="color: #a7a7a7; font-weight: bold">int</span> *p, q;
   <span style="color: #a7a7a7; font-weight: bold">int</span> *s, *t;
   <span style="color: #a7a7a7; font-weight: bold">int</span> * a <span style="color: #8B008B; font-weight: bold">new</span>[var];    <span style="color: #228B22">// dynamic memory allocation</span>
   <span style="color: #8B008B; font-weight: bold">delete</span> [] a;
}
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec53">Technical Matter in C/C++: <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program7.cpp" target="_blank">Pointer example I</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std; <span style="color: #228B22">// note use of namespace</span>
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>()
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> var;
  <span style="color: #a7a7a7; font-weight: bold">int</span> *p;
  p = &amp;var;
  var  = <span style="color: #B452CD">421</span>;
  printf(<span style="color: #CD5555">&quot;Address of integer variable var : %p\n&quot;</span>,&amp;var);
  printf(<span style="color: #CD5555">&quot;Its value: %d\n&quot;</span>, var);
  printf(<span style="color: #CD5555">&quot;Value of integer pointer p : %p\n&quot;</span>,p);
  printf(<span style="color: #CD5555">&quot;The value p points at :  %d\n&quot;</span>,*p);
  printf(<span style="color: #CD5555">&quot;Address of the pointer p : %p\n&quot;</span>,&amp;p);
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
}
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec54">Dissection: Pointer example I </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Discussion.</b>
<p>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>()
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> var;     <span style="color: #228B22">// Define an integer variable var</span>
  <span style="color: #a7a7a7; font-weight: bold">int</span> *p;      <span style="color: #228B22">// Define a pointer to an integer</span>
  p = &amp;var;    <span style="color: #228B22">// Extract the address of var</span>
  var = <span style="color: #B452CD">421</span>;   <span style="color: #228B22">// Change content of var</span>
  printf(<span style="color: #CD5555">&quot;Address of integer variable var : %p\n&quot;</span>, &amp;var);
  printf(<span style="color: #CD5555">&quot;Its value: %d\n&quot;</span>, var);  <span style="color: #228B22">// 421</span>
  printf(<span style="color: #CD5555">&quot;Value of integer pointer p : %p\n&quot;</span>, p);  <span style="color: #228B22">// = &amp;var</span>
  <span style="color: #228B22">// The content of the variable pointed to by p is *p</span>
  printf(<span style="color: #CD5555">&quot;The value p points at :  %d\n&quot;</span>, *p);
  <span style="color: #228B22">// Address where the pointer is stored in memory</span>
  printf(<span style="color: #CD5555">&quot;Address of the pointer p : %p\n&quot;</span>, &amp;p);
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
}
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec55"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program8.cpp" target="_blank">Pointer example II</a> </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> matr[<span style="color: #B452CD">2</span>];
<span style="color: #a7a7a7; font-weight: bold">int</span> *p;
p = &amp;matr[<span style="color: #B452CD">0</span>];
matr[<span style="color: #B452CD">0</span>] = <span style="color: #B452CD">321</span>;
matr[<span style="color: #B452CD">1</span>] = <span style="color: #B452CD">322</span>;
printf(<span style="color: #CD5555">&quot;\nAddress of matrix element matr[1]: %p&quot;</span>,&amp;matr[<span style="color: #B452CD">0</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the  matrix element  matr[1]; %d&quot;</span>,matr[<span style="color: #B452CD">0</span>]);
printf(<span style="color: #CD5555">&quot;\nAddress of matrix element matr[2]: %p&quot;</span>,&amp;matr[<span style="color: #B452CD">1</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the matrix element  matr[2]: %d\n&quot;</span>, matr[<span style="color: #B452CD">1</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the pointer p: %p&quot;</span>,p);
printf(<span style="color: #CD5555">&quot;\nThe value p points to: %d&quot;</span>,*p);
printf(<span style="color: #CD5555">&quot;\nThe value that (p+1) points to  %d\n&quot;</span>,*(p+<span style="color: #B452CD">1</span>));
printf(<span style="color: #CD5555">&quot;\nAddress of pointer p : %p\n&quot;</span>,&amp;p);
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec56">Dissection: Pointer example II </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> matr[<span style="color: #B452CD">2</span>];    <span style="color: #228B22">// Define integer array with two elements</span>
<span style="color: #a7a7a7; font-weight: bold">int</span> *p;         <span style="color: #228B22">// Define pointer to integer</span>
p = &amp;matr[<span style="color: #B452CD">0</span>];   <span style="color: #228B22">// Point to the address of the first element in matr</span>
matr[<span style="color: #B452CD">0</span>] = <span style="color: #B452CD">321</span>;  <span style="color: #228B22">// Change the first element</span>
matr[<span style="color: #B452CD">1</span>] = <span style="color: #B452CD">322</span>;  <span style="color: #228B22">// Change the second element</span>
printf(<span style="color: #CD5555">&quot;\nAddress of matrix element matr[1]: %p&quot;</span>, &amp;matr[<span style="color: #B452CD">0</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the  matrix element  matr[1]; %d&quot;</span>, matr[<span style="color: #B452CD">0</span>]);
printf(<span style="color: #CD5555">&quot;\nAddress of matrix element matr[2]: %p&quot;</span>, &amp;matr[<span style="color: #B452CD">1</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the matrix element  matr[2]: %d\n&quot;</span>, matr[<span style="color: #B452CD">1</span>]);
printf(<span style="color: #CD5555">&quot;\nValue of the pointer p: %p&quot;</span>, p);
printf(<span style="color: #CD5555">&quot;\nThe value p points to: %d&quot;</span>, *p);
printf(<span style="color: #CD5555">&quot;\nThe value that (p+1) points to  %d\n&quot;</span>, *(p+<span style="color: #B452CD">1</span>));
printf(<span style="color: #CD5555">&quot;\nAddress of pointer p : %p\n&quot;</span>, &amp;p);
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec57">Output of Pointer example II </h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=text typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span></span>Address of the matrix element matr[1]: 0xbfffef70
Value of the  matrix element  matr[1]; 321
Address of the matrix element matr[2]: 0xbfffef74
Value of the matrix element  matr[2]: 322
Value of the pointer: 0xbfffef70
The value pointer points at: 321
The value that (pointer+1) points at:  322
Address of the pointer variable : 0xbfffef6c
</pre></div>

</div>


<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec58">File handling; C-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std;
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span> *argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">FILE</span> *in_file, *out_file;
  <span style="color: #8B008B; font-weight: bold">if</span>( argc &lt; <span style="color: #B452CD">3</span>)  {
    printf(<span style="color: #CD5555">&quot;The programs has the following structure :\n&quot;</span>);
    printf(<span style="color: #CD5555">&quot;write in the name of the input and output files \n&quot;</span>);
    exit(<span style="color: #B452CD">0</span>);
  }
  in_file = fopen( argv[<span style="color: #B452CD">1</span>], <span style="color: #CD5555">&quot;r&quot;</span>);<span style="color: #228B22">// returns pointer to the  input file</span>
  <span style="color: #8B008B; font-weight: bold">if</span>( in_file == <span style="color: #658b00">NULL</span> )  { <span style="color: #228B22">// NULL means that the file is missing</span>
    printf(<span style="color: #CD5555">&quot;Can&#39;t find the input file %s\n&quot;</span>, argv[<span style="color: #B452CD">1</span>]);
    exit(<span style="color: #B452CD">0</span>);
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec59">File handling; C way cont. </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span> out_file = fopen( argv[<span style="color: #B452CD">2</span>], <span style="color: #CD5555">&quot;w&quot;</span>); <span style="color: #228B22">// returns a pointer to the output file</span>
 <span style="color: #8B008B; font-weight: bold">if</span>( out_file == <span style="color: #658b00">NULL</span> )  {       <span style="color: #228B22">// can&#39;t find the file</span>
    printf(<span style="color: #CD5555">&quot;Can&#39;t find the output file%s\n&quot;</span>, argv[<span style="color: #B452CD">2</span>]);
    exit(<span style="color: #B452CD">0</span>);
  }
  fclose(in_file);
  fclose(out_file);
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec60">File handling, C++-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;fstream&gt;</span><span style="color: #1e889b"></span>

<span style="color: #228B22">// input and output file as global variable</span>
ofstream ofile;
ifstream ifile;
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec61">File handling, C++-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">char</span> *outfilename;
  <span style="color: #228B22">//Read in output file, abort if there are too</span>
  <span style="color: #228B22">//few command-line arguments</span>
  <span style="color: #8B008B; font-weight: bold">if</span>( argc &lt;= <span style="color: #B452CD">1</span> ){
    cout &lt;&lt; <span style="color: #CD5555">&quot;Bad Usage: &quot;</span> &lt;&lt; argv[<span style="color: #B452CD">0</span>] &lt;&lt;
      <span style="color: #CD5555">&quot; read also output file on same line&quot;</span> &lt;&lt; endl;
    exit(<span style="color: #B452CD">1</span>);
  }
  <span style="color: #8B008B; font-weight: bold">else</span>{
    outfilename=argv[<span style="color: #B452CD">1</span>];
  }
  ofile.open(outfilename);
  .....
  ofile.close();  <span style="color: #228B22">// close output file</span>
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec62">File handling, C++-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">void</span> <span style="color: #008b45">output</span>(<span style="color: #a7a7a7; font-weight: bold">double</span> r_min , <span style="color: #a7a7a7; font-weight: bold">double</span> r_max, <span style="color: #a7a7a7; font-weight: bold">int</span> max_step,
            <span style="color: #a7a7a7; font-weight: bold">double</span> *d)
{
<span style="color: #a7a7a7; font-weight: bold">int</span> i;
ofile &lt;&lt; <span style="color: #CD5555">&quot;RESULTS:&quot;</span> &lt;&lt; endl;
ofile &lt;&lt; setiosflags(ios::showpoint | ios::uppercase);
ofile &lt;&lt;<span style="color: #CD5555">&quot;R_min = &quot;</span> &lt;&lt; setw(<span style="color: #B452CD">15</span>) &lt;&lt; setprecision(<span style="color: #B452CD">8</span>) &lt;&lt;r_min &lt;&lt;endl;
ofile &lt;&lt;<span style="color: #CD5555">&quot;R_max = &quot;</span> &lt;&lt; setw(<span style="color: #B452CD">15</span>) &lt;&lt; setprecision(<span style="color: #B452CD">8</span>) &lt;&lt;r_max &lt;&lt;endl;
ofile &lt;&lt;<span style="color: #CD5555">&quot;Number of steps = &quot;</span> &lt;&lt; setw(<span style="color: #B452CD">15</span>) &lt;&lt; max_step &lt;&lt; endl;
ofile &lt;&lt; <span style="color: #CD5555">&quot;Five lowest eigenvalues:&quot;</span> &lt;&lt; endl;
<span style="color: #8B008B; font-weight: bold">for</span>(i = <span style="color: #B452CD">0</span>; i &lt; <span style="color: #B452CD">5</span>; i++) {
    ofile &lt;&lt; setw(<span style="color: #B452CD">15</span>) &lt;&lt; setprecision(<span style="color: #B452CD">8</span>) &lt;&lt; d[i] &lt;&lt; endl;

}  <span style="color: #228B22">// end of function output</span>
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec63">File handling, C++-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">char</span> *infilename;
  <span style="color: #228B22">// Read in input file, abort if there are too</span>
  <span style="color: #228B22">// few command-line arguments</span>
  <span style="color: #8B008B; font-weight: bold">if</span>( argc &lt;= <span style="color: #B452CD">1</span> ){
    cout &lt;&lt; <span style="color: #CD5555">&quot;Bad Usage: &quot;</span> &lt;&lt; argv[<span style="color: #B452CD">0</span>] &lt;&lt;
      <span style="color: #CD5555">&quot; read also input file on same line&quot;</span> &lt;&lt; endl;
    exit(<span style="color: #B452CD">1</span>);
  }
  <span style="color: #8B008B; font-weight: bold">else</span>{
    infilename=argv[<span style="color: #B452CD">1</span>];
  }
  ifile.open(infilename);
  ....
  ifile.close();  <span style="color: #228B22">// close input file</span>
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec64">File handling, C++-way </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #8B008B; font-weight: bold">const</span> <span style="color: #a7a7a7; font-weight: bold">char</span>* filename1 = <span style="color: #CD5555">&quot;myfile&quot;</span>;
ifstream <span style="color: #008b45">ifile</span>(filename1);
string filename2 = filename1 + <span style="color: #CD5555">&quot;.out&quot;</span>
ofstream ofile(filename2);  <span style="color: #228B22">// new output file</span>
ofstream <span style="color: #008b45">ofile</span>(filename2, ios_base::app);  <span style="color: #228B22">// append</span>

<span style="color: #228B22">//      Read something from the file:</span>

<span style="color: #a7a7a7; font-weight: bold">double</span> a; <span style="color: #a7a7a7; font-weight: bold">int</span> b; <span style="color: #a7a7a7; font-weight: bold">char</span> c[<span style="color: #B452CD">200</span>];
ifile &gt;&gt; a &gt;&gt; b &gt;&gt; c;  <span style="color: #228B22">// skips white space in between</span>

<span style="color: #228B22">//      Can test on success of reading:</span>

<span style="color: #8B008B; font-weight: bold">if</span> (!(ifile &gt;&gt; a &gt;&gt; b &gt;&gt; c)) ok = <span style="color: #B452CD">0</span>;
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec65">Call by value or reference </h2>
C++ allows the programmer to use solely call by reference (note that call by reference is implemented as pointers). To see the difference between C and C++, consider the following simple examples.
In C we would write

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>   <span style="color: #a7a7a7; font-weight: bold">int</span> n; n =<span style="color: #B452CD">8</span>;
   func(&amp;n); <span style="color: #228B22">/* &amp;n is a pointer to n */</span>
   ....
   <span style="color: #a7a7a7; font-weight: bold">void</span> func(<span style="color: #a7a7a7; font-weight: bold">int</span> *i)
   {
     *i = <span style="color: #B452CD">10</span>; <span style="color: #228B22">/* n is changed to 10 */</span>
     ....
   }
</pre></div>
<p>
whereas in C++ we would write
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>   <span style="color: #a7a7a7; font-weight: bold">int</span> n; n =<span style="color: #B452CD">8</span>;
   func(n); <span style="color: #228B22">// just transfer n itself</span>
   ....
   <span style="color: #a7a7a7; font-weight: bold">void</span> func(<span style="color: #a7a7a7; font-weight: bold">int</span>&amp; i)
   {
     i = <span style="color: #B452CD">10</span>; <span style="color: #228B22">// n is changed to 10</span>
     ....
   }
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec66">Call by value or reference </h2>
The reason why we emphasize the difference between call by value and call
by reference is that it allows the programmer to avoid pitfalls
like unwanted changes of variables. However, many people feel that this
reduces the readability of the code.

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec67">Call by value and reference, F90/95 </h2>

<p>
In Fortran we can use <code>INTENT(IN)</code>, <code>INTENT(OUT)</code>, <code>INTENT(INOUT)</code> to let the
program know which values should or should not be changed.

<p>

<!-- code=fortran (!bc fcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #8B008B; font-weight: bold">SUBROUTINE </span>coulomb_integral(np,lp,n,l,coulomb)
  <span style="color: #8B008B; font-weight: bold">USE </span>effective_interaction_declar
  <span style="color: #8B008B; font-weight: bold">USE </span>energy_variables
  <span style="color: #8B008B; font-weight: bold">USE </span>wave_functions
  <span style="color: #8B008B; font-weight: bold">IMPLICIT NONE</span>
<span style="color: #8B008B; font-weight: bold">  </span><span style="color: #a7a7a7; font-weight: bold">INTEGER</span>, <span style="color: #8B008B; font-weight: bold">INTENT</span>(IN)  <span style="color: #8B008B; font-weight: bold">::</span> n, l, np, lp
  <span style="color: #a7a7a7; font-weight: bold">INTEGER</span> <span style="color: #8B008B; font-weight: bold">::</span> i
  <span style="color: #a7a7a7; font-weight: bold">REAL</span>(<span style="color: #658b00">KIND</span>=<span style="color: #B452CD">8</span>), <span style="color: #8B008B; font-weight: bold">INTENT</span>(INOUT) <span style="color: #8B008B; font-weight: bold">::</span> coulomb
  <span style="color: #a7a7a7; font-weight: bold">REAL</span>(<span style="color: #658b00">KIND</span>=<span style="color: #B452CD">8</span>) <span style="color: #8B008B; font-weight: bold">::</span> z_rel, oscl_r, sum_coulomb
  ...
</pre></div>
<p>
This hinders unwanted changes and increases readability.

<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec68"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program4.cpp" target="_blank">Example codes in c++, dynamic memory allocation</a> </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std; <span style="color: #228B22">// note use of namespace                                       </span>
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> i = atoi(argv[<span style="color: #B452CD">1</span>]); 
  <span style="color: #228B22">//  Dynamic memory allocation: need tp declare -a- as a pointer</span>
  <span style="color: #228B22">//  You can use double *a = new double[i];  or </span>
  <span style="color: #a7a7a7; font-weight: bold">double</span> *a;
  a = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">double</span>[i];
  <span style="color: #228B22">// the first of element of a, a[0], and its address is the </span>
  <span style="color: #228B22">// value of the pointer. </span>
  <span style="color: #228B22">/* This is a longer comment</span>
<span style="color: #228B22">     if we want a static memory allocation </span>
<span style="color: #228B22">     this is the way to do it</span>
<span style="color: #228B22">  */</span>
  cout &lt;&lt; <span style="color: #CD5555">&quot; bytes for i=&quot;</span> &lt;&lt; <span style="color: #8B008B; font-weight: bold">sizeof</span>(i) &lt;&lt; endl;
  <span style="color: #8B008B; font-weight: bold">for</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> j = <span style="color: #B452CD">0</span>; j &lt; i; j++) {
    a[j] = j*exp(<span style="color: #B452CD">2.0</span>);
    cout &lt;&lt; <span style="color: #CD5555">&quot;a=&quot;</span> &lt;&lt; a[j] &lt;&lt; endl;
  }
  <span style="color: #228B22">// freeing memory</span>
  <span style="color: #8B008B; font-weight: bold">delete</span> [] a;
  <span style="color: #228B22">// to check for memory leaks, use the software called -valgrind-</span>
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;           <span style="color: #228B22">/* success execution of the program */</span>
}
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec69"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program5.cpp" target="_blank">Example codes in c++, writing to file and dynamic allocation for arrays</a> </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;fstream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iomanip&gt;</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std; <span style="color: #228B22">// note use of namespace                                       </span>

<span style="color: #228B22">// output file as global variable</span>

ofstream ofile;  

<span style="color: #228B22">// Begin of main program   </span>

<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">char</span> *outfilename;
  <span style="color: #228B22">// Read in output file, abort if there are too few command-line arguments</span>
  <span style="color: #8B008B; font-weight: bold">if</span>( argc &lt;= <span style="color: #B452CD">2</span> ){
    cout &lt;&lt; <span style="color: #CD5555">&quot;Bad Usage: &quot;</span> &lt;&lt; argv[<span style="color: #B452CD">0</span>] &lt;&lt; 
      <span style="color: #CD5555">&quot; read also output file and number of elements on same line&quot;</span> &lt;&lt; endl;
    exit(<span style="color: #B452CD">1</span>);
  }
  <span style="color: #8B008B; font-weight: bold">else</span>{
    outfilename=argv[<span style="color: #B452CD">1</span>];
  }

  <span style="color: #228B22">//  opening a file for the program</span>
  ofile.open(outfilename); 
  <span style="color: #a7a7a7; font-weight: bold">int</span> i = atoi(argv[<span style="color: #B452CD">2</span>]); 
  <span style="color: #228B22">//  int *a;</span>
  <span style="color: #228B22">//a = new int[i];</span>
  <span style="color: #a7a7a7; font-weight: bold">double</span> *a = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">double</span>[i]; 
  cout &lt;&lt; <span style="color: #CD5555">&quot; bytes for i=&quot;</span> &lt;&lt; <span style="color: #8B008B; font-weight: bold">sizeof</span>(i) &lt;&lt; endl;
  <span style="color: #8B008B; font-weight: bold">for</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> j = <span style="color: #B452CD">0</span>; j &lt; i; j++) {
    a[j] = j*exp(<span style="color: #B452CD">2.0</span>);
    <span style="color: #228B22">// ofile instead of cout</span>
    ofile &lt;&lt; setw(<span style="color: #B452CD">15</span>) &lt;&lt; setprecision(<span style="color: #B452CD">8</span>) &lt;&lt; <span style="color: #CD5555">&quot;a=&quot;</span> &lt;&lt; a[j] &lt;&lt; endl;
  }
  <span style="color: #8B008B; font-weight: bold">delete</span> [] a; <span style="color: #228B22">// free memory</span>
  ofile.close();  <span style="color: #228B22">// close output file</span>
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
}
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec70"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program6.cpp" target="_blank">Example codes in c++, transfer of data using call by value and call by reference</a> </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std;
<span style="color: #228B22">//  Declare functions before main</span>
<span style="color: #a7a7a7; font-weight: bold">void</span> <span style="color: #008b45">func</span>(<span style="color: #a7a7a7; font-weight: bold">int</span>, <span style="color: #a7a7a7; font-weight: bold">int</span>*);
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span> *argv[]) 
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> a; 
  <span style="color: #a7a7a7; font-weight: bold">int</span> *b;
  a = <span style="color: #B452CD">10</span>;
  b = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">int</span>[<span style="color: #B452CD">10</span>];
  <span style="color: #8B008B; font-weight: bold">for</span>(<span style="color: #a7a7a7; font-weight: bold">int</span> i = <span style="color: #B452CD">0</span>; i &lt; <span style="color: #B452CD">10</span>; i++) {
    b[i] = i;
    cout &lt;&lt;  b[i] &lt;&lt; endl;
  }
  <span style="color: #228B22">// the variable a is transferred by call by value. This means</span>
  <span style="color: #228B22">//  that the function func cannot change a in the calling function</span>
  func( a,b);
  
  <span style="color: #8B008B; font-weight: bold">delete</span> [] b ; 
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;
} <span style="color: #228B22">// End: function main()</span>

<span style="color: #a7a7a7; font-weight: bold">void</span> <span style="color: #008b45">func</span>( <span style="color: #a7a7a7; font-weight: bold">int</span> x, <span style="color: #a7a7a7; font-weight: bold">int</span> *y) 
{
  <span style="color: #228B22">// a becomes locally x  and it can be changed locally</span>
  x+=<span style="color: #B452CD">7</span>;
  <span style="color: #228B22">//  func gets the address of the first element of y (b)</span>
  <span style="color: #228B22">// it changes y[0] to 10 and when returning control to main</span>
  <span style="color: #228B22">// it changes also b[0]. Call by reference</span>
  *y += <span style="color: #B452CD">10</span>;  <span style="color: #228B22">//  *y = *y+10;</span>
  <span style="color: #228B22">//  explicit element </span>
  y[<span style="color: #B452CD">6</span>] += <span style="color: #B452CD">10</span>;
  <span style="color: #228B22">//   in this function y[0]  and y[6] have been changed and when returning </span>
  <span style="color: #228B22">// control to main  this means that b[0] and b[6] are changed.  </span>
  <span style="color: #8B008B; font-weight: bold">return</span>;
} <span style="color: #228B22">// End: function func()</span>
</pre></div>
<p>
<!-- !split --><br><br><br><br><br><br><br><br><br><br>

<h2 id="___sec71"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp" target="_blank">Example codes in c++, operating on several arrays and printing time used</a> </h2>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cstdlib&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iostream&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;cmath&gt;</span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&lt;iomanip&gt; </span><span style="color: #1e889b"></span>
<span style="color: #1e889b">#include</span> <span style="color: #228B22">&quot;time.h&quot; </span><span style="color: #1e889b"></span>

<span style="color: #8B008B; font-weight: bold">using</span> <span style="color: #8B008B; font-weight: bold">namespace</span> std; <span style="color: #228B22">// note use of namespace                                       </span>
<span style="color: #a7a7a7; font-weight: bold">int</span> <span style="color: #008b45">main</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> argc, <span style="color: #a7a7a7; font-weight: bold">char</span>* argv[])
{
  <span style="color: #a7a7a7; font-weight: bold">int</span> i = atoi(argv[<span style="color: #B452CD">1</span>]); 
  <span style="color: #a7a7a7; font-weight: bold">double</span> *a, *b, *c;
  a = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">double</span>[i]; 
  b = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">double</span>[i]; 
  c = <span style="color: #8B008B; font-weight: bold">new</span> <span style="color: #a7a7a7; font-weight: bold">double</span>[i]; 

  <span style="color: #a7a7a7; font-weight: bold">clock_t</span> start, finish;
  start = clock();
  <span style="color: #8B008B; font-weight: bold">for</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> j = <span style="color: #B452CD">0</span>; j &lt; i; j++) {
    a[j] = cos(j*<span style="color: #B452CD">1.0</span>);
    b[j] = sin(j+<span style="color: #B452CD">3.0</span>);
    c[j] = <span style="color: #B452CD">0.0</span>;
  }
  <span style="color: #8B008B; font-weight: bold">for</span> (<span style="color: #a7a7a7; font-weight: bold">int</span> j = <span style="color: #B452CD">0</span>; j &lt; i; j++) {
    c[j] = a[j]+b[j];
  }
  finish = clock();
  <span style="color: #a7a7a7; font-weight: bold">double</span> timeused = (<span style="color: #a7a7a7; font-weight: bold">double</span>) (finish - start)/(CLOCKS_PER_SEC );
  cout &lt;&lt; setiosflags(ios::showpoint | ios::uppercase);
  cout &lt;&lt; setprecision(<span style="color: #B452CD">10</span>) &lt;&lt; setw(<span style="color: #B452CD">20</span>) &lt;&lt; <span style="color: #CD5555">&quot;Time used  for vector addition=&quot;</span> &lt;&lt; timeused  &lt;&lt; endl;
  <span style="color: #8B008B; font-weight: bold">delete</span> [] a;
  <span style="color: #8B008B; font-weight: bold">delete</span> [] b;
  <span style="color: #8B008B; font-weight: bold">delete</span> [] c;
  <span style="color: #8B008B; font-weight: bold">return</span> <span style="color: #B452CD">0</span>;           <span style="color: #228B22">/* success execution of the program */</span>
}
</pre></div>
<p>

<!-- ------------------- end of main content --------------- -->


<center style="font-size:80%">
<!-- copyright --> &copy; 1999-2017, Morten Hjorth-Jensen. Released under CC Attribution-NonCommercial 4.0 license
</center>


</body>
</html>
    

